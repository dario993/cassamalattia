<div class="row">
  <div class="col-md-6">
      <label>Nome</label>
  </div>
  <div class="col-md-3">
      <label>Data di nascita</label>
  </div>
  <div class="col-md-2">
      <label>Sesso</label>
  </div>
  <div class="col-md-1">
      <label></label>
  </div>
</div>


<form [formGroup]="myForm" class="form-lg" >
    

    <div formArrayName="persons">
    
      <div *ngFor="let person of  personForms.controls; let i=index" class="row" [formGroupName]="i" style="margin-bottom: 30px">
        <div class="col-6 form-group">
            <input type="text"  class="form-control form-control-lg" placeholder="Persona {{i+1}}"  formControlName="nome"
            [ngClass]="{
              'is-invalid': person.controls.nome.invalid && (person.controls.nome.dirty || person.controls.nome.touched),
              'is-valid': person.controls.nome.valid && (person.controls.nome.dirty || person.controls.nome.touched) }">
           
      
            <div *ngIf="person.controls.nome.dirty && person.controls.nome.touched && person.controls.nome.invalid">
              <div class="text-danger" *ngIf="person.controls.nome.errors.required">
                Il campo nome è richiesto!
              </div>
              <div class="text-danger" *ngIf="person.controls.nome.errors.minlength">
                Inserire almeno {{person.controls.nome.errors.minlength.requiredLength}} caratteri
              </div>
              <div class="text-danger" *ngIf="person.controls.nome.errors.pattern">
                Inserire caratteri dall a-z
              </div>
            </div>

        </div>
        <div class="col-3">
            <input type="text" class="form-control form-control-lg"  placeholder="GG.MM.AA"  formControlName="nascita"
            [ngClass]="{
              'is-invalid': person.controls.nascita.invalid && (person.controls.nascita.dirty || person.controls.nascita.touched),
              'is-valid': person.controls.nascita.valid && (person.controls.nascita.dirty || person.controls.nascita.touched) }">
              
              <div *ngIf="person.controls.nascita.dirty && person.controls.nascita.touched && person.controls.nascita.invalid">
                <div class="text-danger" *ngIf="person.controls.nascita.errors.required">
                  Il campo nascita è richiesto!
                </div>
                <div class="text-danger" *ngIf="person.controls.nascita.errors.pattern">
                  Inserire data formato GG.MM.AAAA
                </div>
              </div>
        </div>
        <div class="col-2">
          <div class="btn-group btn-group-toggle btn-group-lg" ngbRadioGroup name="sesso"  formControlName="sesso"  >
              <label ngbButtonLabel class="btn-light">
                <input ngbButton type="radio" [value]="true"><fa name="male"></fa>
              </label>
            
              <label ngbButtonLabel class="btn-light">
                <input ngbButton type="radio" [value]="false"><fa name="female"></fa>
              </label>
            </div>
            <button type="button" class="btn btn-lg btn-link sm-1" style="margin-left: 10px" (click)="deletePerson(i)"
            *ngIf="personForms.controls?.length > 1" ><fa name="times" ></fa></button>
        </div>
      </div>
    </div>
  </form>


<div class="row">
  <div class="col" >
    <button type="button" class="btn btn-light" (click)="addPerson()"><fa name="plus"></fa> </button>
    <label style="margin-left: 15px">Aggiugi persona</label>
  </div>
</div>

<div class="row" style="margin-top: 20px">
    <div class="col text-left">
       
            <button type="button"   [disabled]="myForm.invalid"  class="btn btn-primary" (click)="nextStep()">Avanti</button>
     
    </div>
</div>

<div class="row">
  <div class="col">
    <p>
      {{myForm.value | json }}
  </div>
</div>